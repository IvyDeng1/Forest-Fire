# Forest Fire Simulation

This project simulates the spread of a fire in a forest. The forest is represented as a grid where each cell can be a tree, river, fire, or ashes. The simulation models fire propagation, using probabilistic rules to determine how the fire spreads from tree to tree and when trees turn into ashes.

The simulation generates an animated visualization of the fire spreading, which can be saved as a GIF.

The main goal of this report is to simulate and analyze the spread of fire in a forest environment.

The report will address two main tasks:

Task 1: Implementing a basic forest fire model and exploring how parameters like α (fire spread probability) and β (burnt-out probability) affect the fire’s spread.`(r:'forest_fire1_upgrate')`

Task 2: Enhancing the model by incorporating environmental factors such as wind direction, wind strength, and flying embers, and analyzing their effects on fire dynamics.`(r:'forest_fire with environment')`


## Features

- **Forest Generation**: Create a grid-based forest with a specified tree density.
- **Fire Propagation**: The fire starts in the center of the forest and spreads based on two probabilities:
  - `alpha`: Probability of fire spreading from one tree to a neighboring tree.
  - `beta`: Probability of a burning tree turning into ashes.
- **Animation**: Visualize the fire spread over time using an animated plot.

## Requirements

- R version 4.0.0 or higher
- Required R packages:
  - `ggplot2`: For visualizations.
  - `gganimate`: For animations.

You can install the necessary R packages using the following commands:

```r
install.packages("ggplot2")
install.packages("gganimate")

```
# Functions

`GenerateForest(sizeX, sizeY, treeDensity)`
Generates a forest grid with dimensions `sizeX` x `sizeY` and a specified `treeDensity`. 
The tree density determines the proportion of cells that will contain trees (`1`).

## Parameters:

- `sizeX` (integer): The width of the forest (number of columns).
- `sizeY` (integer): The height of the forest (number of rows).
- `treeDensity` (float): The probability that a cell will contain a tree (between 0 and 1).
## Returns: A matrix representing the forest grid.

`ForestToPlot(forest)`
Converts the forest matrix into a data frame suitable for plotting with ggplot2.

## Parameters:

- `forest` (matrix): The forest matrix generated by GenerateForest.
## Returns: A data frame with columns X, Y, and State.

`StartForestFire(forest, alpha, beta)`
Simulates the spread of fire in the forest. 
The fire starts at the center of the forest and spreads according to the parameters `alpha` and `beta`.

## Parameters:

- `forest` (matrix): The initial forest grid.
- `alpha` (float): Probability of fire spread from a burning tree to a neighboring tree.
- `beta` (float): Probability of a burning tree turning into ashes.

## Returns: A list of data frames representing the state of the forest at each time step.

# Usage
## 1. Set up Simulation Parameters
You can adjust the simulation parameters (e.g., `sizeX`, `sizeY`, `treeDensity`, `alpha`, `beta`,`windDirection`,`windStrength`,`emberProbability`) to control the size and behavior of the forest and fire.

Example:
```r
sizeX <- 100      # Width of the forest
sizeY <- 95       # Height of the forest
treeDensity <- 0.8  # Tree density (0 to 1)
alpha <- 0.4      # Probability of fire spread
beta <- 0.2       # Probability of fire exhaustion
windDirection <- c(0, 1)  # direction(up);c(1,0)(left);c(-1,0)(right);c(0,-1)(down)
windStrength <- 1.5  # wind strength
emberProbability <- 0.1  # probability of flying embers
```

## 2. Run the Forest Fire Simulation
To generate the forest and run the fire simulation:

```r
forest <- GenerateForest(sizeX, sizeY, treeDensity)
frames <- StartForestFire(forest, alpha, beta)
```

## 3. Create the Animation
To visualize the fire spread, you can use `ggplot2` and `gganimate` to generate an animated GIF:

```r
anim <- ggplot() +
  geom_tile(data = do.call(rbind, frames), aes(x = X, y = Y, fill = factor(State)), 
            width = 1, height = 1) +  # Add tile, adjust height and width
  scale_fill_manual(values = c("royalblue", "green", "red", "black"), 
                    breaks = c("0", "1", "2", "3"), 
                    labels = c("Rivers", "Trees", "Fire", "Ashes")) +
  theme_minimal() +
  theme(axis.text = element_blank(), axis.title = element_blank(), 
        plot.margin = margin(0, 0, 0, 0)) +
  transition_time(Time) +   # animated transition
  ease_aes('linear')       # smooth transition effect

# Save animation as GIF
anim_save("forest_fire.gif", anim, nframes = length(frames), width = 500, height = 500)
```
This will create an animation and save it as a GIF called `forest_fire.gif`.

# Visualization
The animation will show how the fire starts at the center of the forest 
and spreads over time, consuming trees and turning them into ashes. 
The different states of the forest are represented by different colors:
- Royal Blue: Rivers (no trees)
- Green: Trees (unburned)
- Red: Fire (burning trees)
- Black: Ashes (burned trees)





